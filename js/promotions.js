let news_list_datas = {
  data: [
    {
      id: "thang-moi-uu-dai-moi-dac-quyen-moi-cung-cu-dan-vinhomes",
      img: "https://vinhomes.vn/sites/default/files/styles/images_263_x_146/public/2024-05/Screenshot%202024-05-03%20at%2020_1714793777.png?itok=LlXzMdSn",
      title: "THÁNG MỚI, ƯU ĐÃI MỚI, ĐẶC QUYỀN MỚI CÙNG CƯ DÂN VINHOMES!",
      content: `Nhận hàng ngàn ưu đãi khi chính thức trở thành cư dân Vinhomes`,
    },
    {
      id: "ocean-city-san-sang-chao-don-cong-dong-cu-dan-han-quoc",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2024_03/Picture1_1710143283.png?itok=mJ3X7rtX",
      title: "OCEAN CITY SẴN SÀNG CHÀO ĐÓN CỘNG ĐỒNG CƯ DÂN HÀN QUỐC",
      content: `Ocean City, Thành phố điểm đến phía Đông Hà Nội tự hào được International Business Times (IBTimes) – Một trong những thời báo kinh doanh lớn nhất tại Mỹ cùng nhiều thời báo danh giá trên thế giới đánh giá là Nơi đáng sống bậc nhất hành tinh.`,
    },
    {
      id: "uu-dai-thang-01-tien-thue-khi-thue-can-ho-dich-vu-01-nam-tai-du-an-vihome-ocean-park",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_05/Banner%20Anh_1685499475.png?itok=PP6CUdLk",
      title:
        "Ưu đãi 01 tháng tiền thuê khi thuê căn hộ dịch vụ 01 năm tại dự án Vinhomes Ocean Park",
      content: `Ghi dấu ấn trong cộng đồng cư dân phía Đông Hà Nội với những siêu tiện ích kể từ khi ra mắt, đại dự án Vinhomes Ocean Park đang mang đến không gian sống xanh hiện đại, với nhiều điểm nhấn độc đáo thu hút hàng ngàn cư dân lựa chọn là nơi sinh sống và thu hút các khách thuê tìm đến để hưởng trọn vẹn nhu cầu sống của người dân tại dự án từ y tế, giáo dục, chăm sóc sức khỏe đến giải trí, mua sắm.`,
    },
    {
      id: "vinhomes-ra-mat-chinh-sach-cho-thue-shophouse-tai-parking-zone-du-an-vinhomes-ocean-park-va-vinhomes-smart-city",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_04/KV%20ti%E1%BA%BFng%20Anh_1682157219.jpg?itok=3ol5PLix",
      title:
        "Vinhomes ra mắt chính sách cho thuê shophouse tại Parking Zone dự án Vinhomes Ocean Park và Vinhomes Smart City",
      content: `Tại các nước phát triển như Nhật Bản, Hàn Quốc,Thái Lan hay Singapore và đặc biệt các nước Phương Tây hiện nay, các tòa chung cư hay khu đại đô thị luôn hướng đến xây dựng các tầng nổi riêng biệt để làm điểm đỗ xe, tránh được việc ùn tắc cũng như số lượng lớn xe dưới hầm các tòa nhà cao tầng, giảm thiểu nguy cơ cháy nổ.`,
    },
    {
      id: "mua-nha-the-origami-huong-uu-dai-lai-suat-khung-toi-hon-3-nam",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_03/Hinh%202_1679653247.jpg?itok=A-myTiy_",
      title: "Mua nhà The Origami, hưởng ưu đãi lãi suất “khủng” tới hơn 3 năm",
      content: `Vinhomes vừa tung chính khách ưu đãi “khủng” chưa từng có dành cho sản phẩm căn hộ The Origami (Vinhomes Grand Park).`,
    },
    {
      id: "to-am-an-vui-cua-vinhomes-uu-dai-lon-ca-chu-nha-lan-khach-thue",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_03/to-am-an-vui-cua-vinhomes-uu-dai-lon_1679567151.jpeg?itok=c4xUquLi",
      title: "‘Tổ ấm an vui’ của Vinhomes ưu đãi lớn cả chủ nhà lẫn khách thuê",
      content: `“Tổ ấm an vui 3” sẽ kết nối chủ sở hữu, khách thuê cho dự án Vinhomes Ocean Park 2 với loạt ưu đãi lớn: khách thuê tận hưởng cuộc sống chất lượng cao chỉ từ 8 triệu đồng/tháng; chủ sở hữu có thể thu về 24 - 60 triệu đồng/tháng tùy diện tích cho thuê.`,
    },
    {
      id: "tim-kiem-co-hoi-kinh-doanh-cung-vinhomes-voi-mat-bang-tai-thanh-pho-ho-chi-minh",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_03/co-hoi-kinh-doanh-cung-vinhomes_1678787739.jpg?itok=v9qQOh46",
      title: `Tìm kiếm cơ hội kinh doanh cùng Vinhomes với mặt bằng tại thành phố Hồ Chí Minh`,
      content: `Shophouse và các diện tích thương mại cho thuê tại các chân đế khu chung cư hay đô thị phức hợp luôn là những địa điểm mang đến cơ hội đầu tư kinh doanh hấp dẫn, tiếp cận trực tiếp với các cư dân sinh sống trong dự án, làm nổi bật sức sống của khu dân cư. Sau chuỗi thời gian chịu ảnh hưởng của đại dịch Covid-19 và kinh tế đang trên đà hồi phục, phân khúc mặt bằng thương mại cho thuê đã dần có những tăng trưởng trở lại cả nguồn cung và giá thuê trong thời gian gần đây.`,
    },
    {
      id: "vinhomes-ra-mat-nhieu-chinh-sach-thue-tmdv-shophouse-hap-dan-cho-cac-du-an-tai-ha-noi",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_03/thi-truong-thue-thuong-mai-hap-dan_1678785018.jpg?itok=dd_o3XgY",
      title:
        "Vinhomes ra mắt nhiều chính sách thuê TMDV/Shophouse hấp dẫn cho các dự án tại Hà Nội",
      content: `Theo báo cáo của trang batdongsan.com.vn cho thấy quý IV/2022 vừa qua, trong khi thị trường bất động sản để bán (chung cư, nhà phố, đất nền) khá trầm lắng thì các phân khúc cho thuê lại ghi nhận nhiều tín hiệu tích cực do nhu cầu thuê nhà ở và mặt bằng thương mại phục hồi tốt, thậm chí có xu hướng bùng nổ.`,
    },
    {
      id: "nhan-uu-dai-02-thang-tien-thue-tai-du-an-vihomes-ocean-park-voi-hop-dong-thue-tu-01-nam",
      img: `https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_02/don-loc-xuan-sang_1_1677204094.jpg?itok=cfHQwADT`,
      title:
        "Nhận ưu đãi 02 tháng tiền thuê tại dự án Vinhomes Ocean Park với hợp đồng thuê từ 01 năm",
      content: `Kể từ thời điểm ra mắt, đại dự án Vinhomes Ocean Park luôn mang đến những trải nghiệm sống mới mẻ, hiện đại, tạo nhiều điểm nhấn độc đáo và trở thành dự án nổi bật có vị trí đắc địa tại khu vực phía Đông thủ đô Hà Nội khi chỉ cách trung tâm thành phố khoảng 15 phút lái xe, tiện ích dự án Vinhomes Ocean Park cũng đáp ứng trọn vẹn nhu cầu sống của người dân tại dự án từ y tế, giáo dục, chăm sóc sức khỏe đến giải trí, mua sắm.`,
    },
    {
      id: "co-hoi-mua-nha-sang-trung-tang-xe-dien-vinfast-tai-dai-do-thi-bien-vinhomes",
      img: "https://gcp-cdn.vinhomes.vn/cms-data/styles/images_263_x_146/public/2023_01/anh-120230117193022_1674027172.jpg?itok=Qw3SDGz5",
      title: `Cơ hội mua nhà sang trúng tặng xe điện VinFast tại đại đô thị biển Vinhomes`,
      content: `Thị trường bất động sản dần xuất hiện những tín hiệu tích cực nhờ nỗ lực gỡ “nút thắt” từ chính sách vĩ mô, cùng tác động của các chính sách bán hàng hấp dẫn. Trong đó, tại siêu quần thể đô thị biển 1.200ha Vinhomes, khách hàng có thể nhận quà với tổng giá trị lên tới hàng tỉ đồng từ chương trình ưu đãi hấp dẫn “Nhà sang xế xịn - Xuân sang phát tài”.`,
    },
    {
      id: "vinhomes-royal-island-cong-khai-gia-ben-tren-website",
      img: `https://storage.googleapis.com/vinhomes-data-02/styles/images_263_x_146/public/2024_03/VY%20pr12_1711443028.jpeg?itok=cuhtzD7w`,
      title: "Vinhomes Royal Island công khai giá bán trên website",
      content: `Dự án Thành phố Đảo Hoàng Gia được niêm yết giá công khai trên website Vinhomes Market từ 21/3 để phục vụ nhà đầu tư tìm hiểu, tra cứu thông tin.`,
    },
  ],
};

function create_element(tag_name, attributes) {
  let element = document.createElement(tag_name);

  if (attributes) {
    for (let key in attributes) {
      element[key] = attributes[key];
    }
  }

  return element;
}
let default_loader = 5;
let end_num = 5;
let list = document.getElementsByClassName("list")[0];
let currentNum = document.getElementsByClassName("new_list_wrapper");
let load_btn = document.getElementById("load_more_btn");
load_btn.addEventListener("click", function () {
  let num_list = news_list_datas.data;
  let last_end_num = currentNum.length;
  let end_num = last_end_num + default_loader;

  if (end_num >= num_list.length) {
    end_num = num_list.length + 1;
  }
  let datas = news_list_datas.data.slice(last_end_num, end_num);
  let loading_spinner = document.getElementsByClassName("loadingContainer1")[0];
  loading_spinner.style.display = "flex";
  setTimeout(function () {
    if (end_num >= num_list.length) {
      load_btn.style.visibility = "hidden";
    }
    loading_spinner.style.display = "none";
    loadList(datas);
  }, 1000);
});
document.addEventListener("DOMContentLoaded", function (event) {
  const params = new Proxy(new URLSearchParams(window.location.search), {
    get: (searchParams, prop) => searchParams.get(prop),
  });
  let title = params.title;
  console.log(title);
  if (title != "undefined" && title != "" && title != null) {
    let search_list = [];
    for (let data of news_list_datas.data) {
      if (data.title.includes(title)) search_list.push(data);
    }
    if (search_list.length <= 0) {
      let msg = document.getElementById("result_not_found_msg");
      msg.style.display = "block";
      load_btn.style.visibility = "hidden";
    } else {
      loadList(search_list);
    }
  } else {
    let datas = news_list_datas.data.slice(0, end_num);
    loadList(datas);
  }
});

function loadList(datas) {
  for (let news_data of datas) {
    let new_list_wrapper = create_element("div", {
      className: "new_list_wrapper",
    });
    let new_list_content = create_element("div", {
      className: "new_list_content",
    });
    let new_list_content_left = create_element("div", {
      className: "new_list_content_left",
    });
    let new_list_content_left_img_container = create_element("div", {
      className: "new_list_content_left_img_container",
    });
    let new_list_content_right = create_element("div", {
      className: "new_list_content_right",
    });
    let link_img = create_element("a", {
      href: `chi-tiet.html?title=${news_data.id}`,
    });
    let list_item_img = create_element("img", { src: `${news_data.img}` });
    let heading = create_element("h5");
    let link_heading = create_element("a", {
      href: `chi-tiet.html?title=${news_data.id}`,
      innerText: news_data.title,
    });
    let detail_content = create_element("p", {
      innerText: news_data.content,
    });
    new_list_wrapper.appendChild(new_list_content);
    new_list_content.appendChild(new_list_content_left);
    new_list_content.appendChild(new_list_content_right);
    new_list_content_left.appendChild(new_list_content_left_img_container);
    new_list_content_left_img_container.appendChild(link_img);
    link_img.appendChild(list_item_img);
    new_list_content_right.appendChild(heading);
    heading.appendChild(link_heading);
    new_list_content_right.appendChild(detail_content);
    console.log(new_list_wrapper);
    list.appendChild(new_list_wrapper);
  }
}
